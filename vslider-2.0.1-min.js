/*  
 * vSlider 2.0.1  
 * dynamic slideshow / carousel plugin
 * requires : modernizr 2.0.6+ and jquery 1.7+ 
 * usage : $( element ).vSlider( options ); 
*/  

(function(b){b.fn.vSlider=function(q){var d=b.extend({itemsperslide:1,spacing:0,auto:0,title:!1,desc:!1,divider:!1},q),a=this.find(".vslider"),r=a.find(".item"),m=a.find(".item").length,l=Math.ceil(m/d.itemsperslide),n=a.find(".navigation").width(),e=0,h,i,j,k;this.each(function(){b(this);var o=function(){a.find(".next-pane").length?a.find(".next-pane").click():a.find(".next").click()},g=function(){0<d.auto&&(clearTimeout(p),p=setTimeout(o,d.auto))};a.find(".small").length&&a.find(".thumb").each(function(){b(this).css("cssText", "background:url("+b(this).find(".small").attr("src").replace(/ /g,"%20").replace(/'/g,"%27").replace("(","%28").replace(")","%29")+") no-repeat 50% 50%")});if(1<d.itemsperslide)for(var c=0;c<m;c+=d.itemsperslide)r.slice(c,c+d.itemsperslide).wrapAll("<div class='thumbs'></div>");a.find(".prev").live("click",function(b){b.preventDefault();e--;0>e&&(e=l-1);a.find(".page:eq("+e+")").click();g()});a.find(".next").live("click",function(b){b.preventDefault();e++;e>=l&&(e=0);a.find(".page:eq("+e+")").click(); g()});if(0<d.auto)var p=setTimeout(o,d.auto);a.find(".next-pane").live("click",function(){i=0;a.find(".thumb.active").parent().next().find(".thumb").click();1==h&&(a.find(".next").click(),1==k?(a.find(".thumb:first").click(),k=0):a.find(".thumb.active").parents(".thumbs").next().find(".thumb:first").click(),h=0);a.find(".thumbs:last .thumb:last").hasClass("active")?k=1:k=0;a.find(".thumbs").each(function(){b(".thumb:last",this).hasClass("active")&&(h=1)});g()});a.find(".prev-pane").live("click",function(){h= 0;a.find(".thumb.active").parent().prev().find(".thumb").click();1==i&&(a.find(".prev").click(),1==j?(a.find(".thumb:last").click(),j=0):a.find(".thumb.active").parents(".thumbs").prev().find(".thumb:last").click(),i=0);a.find(".thumbs:first .thumb:first").hasClass("active")?j=1:j=0;a.find(".thumbs").each(function(){b(".thumb:first",this).hasClass("active")&&(i=1)});g()});a.find(".img-pane").length&&a.find(".thumb").live("click",function(c){c.preventDefault();b(this).parents(".navigation").parent().prev().find("img").hide().load(function(){b(this).fadeIn()}).attr("src", b(this).find("img").attr("url"));!0==d.title&&a.find(".info-pane h2").html(b(this).find("img").attr("title"));!0==d.desc&&a.find(".info-pane span").html(b(this).find("img").attr("desc"));a.find(".thumb").removeClass("active");b(this).addClass("active");g()});if(a.find(".pagination").length){for(c=0;c<l;c++)b("<li class='page' rel="+c+">"+(c+1)+"</li>").appendTo(a.find("ul"));a.find(".page").live("click",function(c){c.preventDefault();var c=b(this),f=b(this).attr("rel");e=f;a.find(".page").removeClass("active"); b(this).addClass("active");!Modernizr.csstransitions?a.find(".screen").stop().animate({left:f*-(n+d.spacing)},350):a.find(".screen").css({left:f*-(n+d.spacing)});f=c.position();a.find(".pointer").length&&(b.browser.msie?a.find(".pointer").stop().animate({left:f.left+c.width()/2},500):a.find(".pointer").css({left:f.left+c.width()/2}))});!0==d.divider&&a.find(".page + .page").before(b('<li class="divider">-</li>'));a.find(".pagination").each(function(){1==b(".page",this).length&&(b(this).hide(),a.find(".next,.prev").hide())})}a.find(".thumb:first").click()}); return this}})(jQuery);